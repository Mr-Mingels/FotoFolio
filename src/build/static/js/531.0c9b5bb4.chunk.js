"use strict";(self.webpackChunkfoto_folio=self.webpackChunkfoto_folio||[]).push([[531],{531:function(e,n,r){r.r(n),r.d(n,{default:function(){return u}});var t=r(165),a=r(861),s=r(439),i=r(791),c=r(689),l=r(159),o=r(201),d=r(184),u=function(e){var n=e.likedImagesArray,r=e.getLikedImages,u=(0,i.useState)([]),m=(0,s.Z)(u,2),g=m[0],p=m[1],f=(0,i.useState)(!0),k=(0,s.Z)(f,2),h=k[0],x=k[1],v=(0,i.useState)(""),j=(0,s.Z)(v,2),I=j[0],N=j[1],y=(0,i.useState)([]),L=(0,s.Z)(y,2),b=L[0],w=L[1],B=(0,i.useState)([]),C=(0,s.Z)(B,2),S=C[0],W=C[1],R=(0,i.useState)([]),Z=(0,s.Z)(R,2),U=Z[0],T=Z[1],E=(0,i.useState)(!1),M=(0,s.Z)(E,2),D=M[0],z=M[1],H=(0,c.s0)(),O=function(e){H("/photos/".concat(e))},A=function(){setTimeout((function(){x(!1)}),1e3)},P=function(e){e.target.closest(".likedImageBoxWrapper").style.setProperty("--toggle-opacity","1")},J=function(e){e.target.closest(".likedImageBoxWrapper").style.setProperty("--toggle-opacity","0")};(0,i.useEffect)((function(){var e=localStorage.getItem("likedImages"),n=e?JSON.parse(e):[];p(n);var r=function(e){if(""===I.trim())return e;var n=I.trim().toLowerCase();return e.filter((function(e){return e.tags.toLowerCase().includes(n)}))}(n),t=[],a=[],s=[];r.forEach((function(e,n){n%3===0?t.push(e):n%3===1?a.push(e):s.push(e)})),w(t),W(a),T(s),0===r.length&&x(!1)}),[n,I]);var _=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a,s,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=2;break}return e.abrupt("return");case 2:return z(!0),setTimeout((function(){return z(!1)}),3e3),e.prev=4,e.next=7,fetch(n);case 7:return r=e.sent,e.next=10,r.blob();case 10:a=e.sent,s=n.split("/").pop().split(".")[0]+".jpg",(i=document.createElement("a")).download=s,i.href=URL.createObjectURL(a),i.click(),URL.revokeObjectURL(i.href),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.error("Error downloading image:",e.t0);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(n){return e.apply(this,arguments)}}(),F=function(e){var n=g.filter((function(n){return n.id!==e.id}));p(n),localStorage.setItem("likedImages",JSON.stringify(n)),r(n)},X=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3001/api/image?id=".concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:if(!((a=e.sent).hits.length>0)){e.next=11;break}return e.abrupt("return",a.hits[0].webformatURL);case 11:return e.abrupt("return",null);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.error("Error fetching new image URL:",e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(r);case 2:(a=e.sent)?n.target.src=a:console.error("Couldn't fetch the new image URL");case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,d.jsxs)("section",{className:"likedImagesWrapper",children:[h&&(0,d.jsx)("div",{className:"loader-wrapper",children:(0,d.jsx)("span",{className:"loader",children:(0,d.jsx)("span",{className:"loader-inner"})})}),(0,d.jsx)("header",{className:"likedImagesHeader",children:(0,d.jsxs)("div",{className:"likedImagesContentWrapper",children:[(0,d.jsxs)("div",{className:"likedImagesHeaderTxtWrapper",onMouseEnter:function(e){return function(e){e.target.closest(".likedImagesHeaderTxtWrapper").style.setProperty("--toggle-icon-color","black")}(e)},onMouseLeave:function(e){return function(e){e.target.closest(".likedImagesHeaderTxtWrapper").style.setProperty("--toggle-icon-color","#c2c2c2")}(e)},children:[(0,d.jsxs)("svg",{className:"likedHeartIconImg",viewBox:"0 0 24 24",version:"1.1","aria-hidden":"false",style:{fill:"var(--toggle-icon-color)"},children:[(0,d.jsx)("desc",{lang:"en-US",children:"A heart"}),(0,d.jsx)("path",{d:"M21.424 4.594c-2.101-2.125-5.603-2.125-7.804 0l-1.601 \r 1.619-1.601-1.62c-2.101-2.124-5.603-2.124-7.804 0-2.202 2.126-2.102 5.668 0 7.894L12.019 22l9.405-9.513a5.73 \r 5.73 0 0 0 0-7.893Z"})]}),(0,d.jsx)("span",{children:"Likes"}),(0,d.jsx)("span",{className:"numberOfLikedImages",children:g.length})]}),(0,d.jsxs)("form",{className:"likedImgSearchFormWrapper",onSubmit:function(e){return e.preventDefault()},children:[(0,d.jsx)("div",{className:"likedImgSearchIconWrapper",children:(0,d.jsxs)("svg",{className:"likedImgSearchIcon",viewBox:"0 0 24 24",version:"1.1","aria-hidden":"false",children:[(0,d.jsx)("desc",{lang:"en-US",children:"A magnifying glass"}),(0,d.jsx)("path",{d:"M16.5 15c.9-1.2 1.5-2.8 1.5-4.5C18 6.4 14.6 3 10.5 \r 3S3 6.4 3 10.5 6.4 18 10.5 18c1.7 0 3.2-.5 4.5-1.5l4.6 4.5 1.4-1.5-4.5-4.5zm-6 1c-3 0-5.5-2.5-5.5-5.5S7.5 \r 5 10.5 5 16 7.5 16 10.5 13.5 16 10.5 16z"})]})}),(0,d.jsx)("input",{placeholder:"Search liked images",className:"likedImgSearchInput",value:I,onChange:function(e){return N(e.target.value)}}),(0,d.jsx)("div",{className:"likedImgResetSearchInputBtnWrapper",children:I&&(0,d.jsx)("button",{type:"button",className:"likedImgResetSearchInputBtn",onClick:function(){N("")},children:(0,d.jsxs)("svg",{className:"likedImgClearBtn",viewBox:"0 0 24 24",version:"1.1","aria-hidden":"false",children:[(0,d.jsx)("desc",{lang:"en-US",children:"An X shape"}),(0,d.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 \r 13.41 12 19 6.41Z"})]})})})]})]})}),(0,d.jsx)("div",{className:"renderedLikedImagesWrapper",children:(0,d.jsxs)("div",{className:"renderedLikedImagesContent",children:[(0,d.jsx)("div",{className:"likedImagesResultsColumnContent",children:b.map((function(e,n){return(0,d.jsxs)("div",{className:"likedImageBoxWrapper",onMouseEnter:function(e){return P(e)},onMouseLeave:function(e){return J(e)},children:[(0,d.jsx)("img",{className:"likedImage",loading:"lazy",src:e.webformatURL,onClick:function(){return O(e.id)},onError:function(n){return q(n,e.id)}}),(0,d.jsxs)("div",{className:"likedImageBoxBtnWrapper",style:{opacity:"var(--toggle-opacity)"},children:[(0,d.jsx)("button",{className:"likedDownLoadBtn",disabled:D,onClick:function(){return _(e.webformatURL)},children:(0,d.jsx)("img",{className:"likedDownLoadImg",src:o})}),(0,d.jsx)("button",{className:"likedLikeImgBtn liked",onClick:function(){return F(e)},children:(0,d.jsx)("img",{className:"likedLikeImg liked",src:l})})]}),(0,d.jsx)("div",{className:"likedImgBoxTagsWrapper",style:{opacity:"var(--toggle-opacity)"},children:(0,d.jsx)("span",{className:"likedImgTagsTxt",children:e.tags})})]},n)}))}),(0,d.jsx)("div",{className:"likedImagesResultsColumnContent",children:S.map((function(e,n){return(0,d.jsxs)("div",{className:"likedImageBoxWrapper",onMouseEnter:function(e){return P(e)},onMouseLeave:function(e){return J(e)},children:[(0,d.jsx)("img",{className:"likedImage",loading:"lazy",src:e.webformatURL,onClick:function(){return O(e.id)},onError:function(n){return q(n,e.id)}}),(0,d.jsxs)("div",{className:"likedImageBoxBtnWrapper",style:{opacity:"var(--toggle-opacity)"},children:[(0,d.jsx)("button",{className:"likedDownLoadBtn",disabled:D,onClick:function(){return _(e.webformatURL)},children:(0,d.jsx)("img",{className:"likedDownLoadImg",src:o})}),(0,d.jsx)("button",{className:"likedLikeImgBtn liked",onClick:function(){return F(e)},children:(0,d.jsx)("img",{className:"likedLikeImg liked",src:l})})]}),(0,d.jsx)("div",{className:"likedImgBoxTagsWrapper",style:{opacity:"var(--toggle-opacity)"},children:(0,d.jsx)("span",{className:"likedImgTagsTxt",children:e.tags})})]},n)}))}),(0,d.jsx)("div",{className:"likedImagesResultsColumnContent",children:U.map((function(e,n){return(0,d.jsxs)("div",{className:"likedImageBoxWrapper",onMouseEnter:function(e){return P(e)},onMouseLeave:function(e){return J(e)},children:[(0,d.jsx)("img",{className:"likedImage",loading:"lazy",src:e.webformatURL,onLoad:A,onClick:function(){return O(e.id)},onError:function(n){return q(n,e.id)}}),(0,d.jsxs)("div",{className:"likedImageBoxBtnWrapper",style:{opacity:"var(--toggle-opacity)"},children:[(0,d.jsx)("button",{className:"likedDownLoadBtn",disabled:D,onClick:function(){return _(e.webformatURL)},children:(0,d.jsx)("img",{className:"likedDownLoadImg",src:o})}),(0,d.jsx)("button",{className:"likedLikeImgBtn liked",onClick:function(){return F(e)},children:(0,d.jsx)("img",{className:"likedLikeImg liked",src:l})})]}),(0,d.jsx)("div",{className:"likedImgBoxTagsWrapper",style:{opacity:"var(--toggle-opacity)"},children:(0,d.jsx)("span",{className:"likedImgTagsTxt",children:e.tags})})]},n)}))})]})})]})}}}]);
//# sourceMappingURL=531.0c9b5bb4.chunk.js.map